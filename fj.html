<html>
  <head>
    <title>Flapjack Bites</title>
    <meta charset="UTF-8">
  </head>
  <body>
      <div>
        <form id="brapi-form" name="brapi-form" action="#">
          <div>
            <label for="server">BrAPI server</label>
            <input type="text" id="server" name="server" placeholder="http://localhost:9002/germinate-demo/cactuar-devel/brapi/v1/">
          </div>
          <div>
            <label for="matrix">Matrix ID</label>
            <input type="text" id="matrix" name="matrix" placeholder="3">
          </div>
          <input type="submit" action="#" value="Submit">
        </form>
      </div>
      <div id="canvas-holder">
        <!-- Empty div that we can insert a canvas into from javascript. -->
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
      <script src="flapjack-bites.js"></script>
      <script src="BrAPI.js"></script>
      <script type="text/javascript">
        $(document).ready(function(){
          $("#brapi-form").submit(function(){
            var form = $(this).serializeArray().reduce(function(vals,entry){
              vals[entry.name] = entry.value
              console.log(entry.name, entry.value);
              return vals
            },{});
            var base_url = form.server;
            var matrix_id = form.matrix;
            var renderer = GenotypeRenderer();
            renderer.renderGenotypesBrapi("#canvas-holder", 800, 600, base_url, matrix_id);
            return false;
          });
      });
      </script>
  </body>
</html>